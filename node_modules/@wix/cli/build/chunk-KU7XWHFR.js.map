{"version":3,"sources":["../../cli-site-old/src/model.ts","../../cli-site-old/src/files/velo.config.ts"],"sourcesContent":["import type { VeloConfig } from '@wix/cli-site-old-definitions';\nimport { loadVeloConfig, saveVeloConfig } from './files/velo.config.js';\n\nexport interface ProjectModel {\n  projectFolder: string;\n  metaSiteId: string;\n  revision: string;\n}\n\nexport async function loadProjectModel(\n  projectFolder: string\n): Promise<ProjectModel> {\n  const config = await loadVeloConfig(projectFolder);\n  return {\n    projectFolder,\n    metaSiteId: config.siteId,\n    revision: config.uiVersion,\n  };\n}\n\nexport async function saveProjectModel(model: ProjectModel): Promise<void> {\n  const config: VeloConfig = {\n    siteId: model.metaSiteId,\n    uiVersion: model.revision,\n  };\n\n  await saveVeloConfig(model.projectFolder, config);\n}\n","import type { VeloConfig } from '@wix/cli-site-old-definitions';\nimport {\n  WIX_CONFIG_FILENAME,\n  getWixConfigFilePath,\n} from '@wix/cli-core-definitions';\nimport { veloConfigSchema } from '@wix/cli-site-old-definitions';\nimport { readJson, writeJson } from '@wix/cli-fs';\nimport { CliError, CliErrorCode } from '@wix/cli-error';\n\nexport async function saveVeloConfig(\n  projectFolder: string,\n  config: VeloConfig\n) {\n  await writeJson(getWixConfigFilePath(projectFolder), config, {\n    spaces: 2,\n  });\n}\n\nexport async function loadVeloConfig(projectFolder: string) {\n  const configFile = await readJson(getWixConfigFilePath(projectFolder));\n\n  try {\n    return veloConfigSchema.parse(configFile);\n  } catch (e) {\n    throw new CliError({\n      code: CliErrorCode.InvalidVeloConfigJson({\n        configFilename: WIX_CONFIG_FILENAME,\n      }),\n      cause: e,\n    });\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA;;;ACAA;AASA,eAAsB,eACpB,eACA,QACA;AACA,QAAM,UAAU,qBAAqB,aAAa,GAAG,QAAQ;AAAA,IAC3D,QAAQ;AAAA,EACV,CAAC;AACH;AAEA,eAAsB,eAAe,eAAuB;AAC1D,QAAM,aAAa,MAAM,SAAS,qBAAqB,aAAa,CAAC;AAErE,MAAI;AACF,WAAO,iBAAiB,MAAM,UAAU;AAAA,EAC1C,SAAS,GAAG;AACV,UAAM,IAAI,SAAS;AAAA,MACjB,MAAM,aAAa,sBAAsB;AAAA,QACvC,gBAAgB;AAAA,MAClB,CAAC;AAAA,MACD,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AACF;;;ADtBA,eAAsB,iBACpB,eACuB;AACvB,QAAM,SAAS,MAAM,eAAe,aAAa;AACjD,SAAO;AAAA,IACL;AAAA,IACA,YAAY,OAAO;AAAA,IACnB,UAAU,OAAO;AAAA,EACnB;AACF;AAEA,eAAsB,iBAAiB,OAAoC;AACzE,QAAM,SAAqB;AAAA,IACzB,QAAQ,MAAM;AAAA,IACd,WAAW,MAAM;AAAA,EACnB;AAEA,QAAM,eAAe,MAAM,eAAe,MAAM;AAClD;","names":[]}