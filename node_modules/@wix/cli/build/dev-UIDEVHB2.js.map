{"version":3,"sources":["../../../node_modules/cloudflared/lib/constants.js","../../../node_modules/cloudflared/lib/error.js","../../../node_modules/cloudflared/lib/install.js","../../../node_modules/cloudflared/lib/regex.js","../../../node_modules/cloudflared/lib/tunnel.js","../../../node_modules/cloudflared/lib/service.js","../../../node_modules/cloudflared/lib/lib.js","../../cli-site-old/src/dev/index.ts","../../cli-site-old/src/dev/dev.ts","../../../node_modules/exit-hook/index.js","../../cli-tunnel/src/index.ts","../../cli-tunnel/src/tunnel.ts","../../cli-tunnel/src/client.ts","../../../node_modules/@wix/ambassador-apps-hosting-v1-deployment/http.impl.ts","../../cli-tunnel/src/schemas.ts","../../cli-site-old/src/environment.ts","../../cli-site-old/src/gridapp/createGridApp.ts","../../cli-site-old/src/gridapp/error-handlers/maxFileSizeErrorHandler.ts","../../cli-site-old/src/gridapp/startGridAppUpdater.ts","../../cli-site-old/src/key-watcher.ts","../../cli-site-old/src/bi.ts","../../cli-site-old/src/dev/sync-all-to-revision.ts","../../cli-site-old/src/sources/index.ts","../../cli-site-old/src/sources/pages-diff.ts"],"sourcesContent":["\"use strict\";\nvar __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getProtoOf = Object.getPrototypeOf;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(isNodeMode || !mod || !mod.__esModule ? __defProp(target, \"default\", { value: mod, enumerable: true }) : target, mod));\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar constants_exports = {};\n__export(constants_exports, {\n  CLOUDFLARED_VERSION: () => CLOUDFLARED_VERSION,\n  DEFAULT_CLOUDFLARED_BIN: () => DEFAULT_CLOUDFLARED_BIN,\n  RELEASE_BASE: () => RELEASE_BASE,\n  bin: () => bin,\n  use: () => use\n});\nmodule.exports = __toCommonJS(constants_exports);\nvar import_node_path = __toESM(require(\"node:path\"));\nconst DEFAULT_CLOUDFLARED_BIN = import_node_path.default.join(__dirname, \"..\", \"bin\", process.platform === \"win32\" ? \"cloudflared.exe\" : \"cloudflared\");\nlet bin = process.env.CLOUDFLARED_BIN || DEFAULT_CLOUDFLARED_BIN;\nfunction use(executable) {\n  bin = executable;\n}\nconst CLOUDFLARED_VERSION = process.env.CLOUDFLARED_VERSION || \"latest\";\nconst RELEASE_BASE = \"https://github.com/cloudflare/cloudflared/releases/\";\n// Annotate the CommonJS export names for ESM import in node:\n0 && (module.exports = {\n  CLOUDFLARED_VERSION,\n  DEFAULT_CLOUDFLARED_BIN,\n  RELEASE_BASE,\n  bin,\n  use\n});\n","\"use strict\";\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar error_exports = {};\n__export(error_exports, {\n  UnsupportedError: () => UnsupportedError\n});\nmodule.exports = __toCommonJS(error_exports);\nclass UnsupportedError extends Error {\n  constructor(message) {\n    super(message);\n  }\n}\n// Annotate the CommonJS export names for ESM import in node:\n0 && (module.exports = {\n  UnsupportedError\n});\n","\"use strict\";\nvar __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getProtoOf = Object.getPrototypeOf;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(isNodeMode || !mod || !mod.__esModule ? __defProp(target, \"default\", { value: mod, enumerable: true }) : target, mod));\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar install_exports = {};\n__export(install_exports, {\n  install: () => install,\n  install_linux: () => install_linux,\n  install_macos: () => install_macos,\n  install_windows: () => install_windows\n});\nmodule.exports = __toCommonJS(install_exports);\nvar import_node_fs = __toESM(require(\"node:fs\"));\nvar import_node_path = __toESM(require(\"node:path\"));\nvar import_node_https = __toESM(require(\"node:https\"));\nvar import_node_child_process = require(\"node:child_process\");\nvar import_constants = require(\"./constants\");\nvar import_error = require(\"./error\");\nconst LINUX_URL = {\n  arm64: \"cloudflared-linux-arm64\",\n  arm: \"cloudflared-linux-arm\",\n  x64: \"cloudflared-linux-amd64\",\n  ia32: \"cloudflared-linux-386\"\n};\nconst MACOS_URL = {\n  arm64: \"cloudflared-darwin-amd64.tgz\",\n  x64: \"cloudflared-darwin-amd64.tgz\"\n};\nconst WINDOWS_URL = {\n  x64: \"cloudflared-windows-amd64.exe\",\n  ia32: \"cloudflared-windows-386.exe\"\n};\nfunction resolve_base(version) {\n  if (version === \"latest\") {\n    return `${import_constants.RELEASE_BASE}latest/download/`;\n  }\n  return `${import_constants.RELEASE_BASE}download/${version}/`;\n}\nasync function install(to, version = import_constants.CLOUDFLARED_VERSION) {\n  if (process.platform === \"linux\") {\n    return install_linux(to, version);\n  } else if (process.platform === \"darwin\") {\n    return install_macos(to, version);\n  } else if (process.platform === \"win32\") {\n    return install_windows(to, version);\n  } else {\n    throw new import_error.UnsupportedError(\"Unsupported platform: \" + process.platform);\n  }\n}\nasync function install_linux(to, version = import_constants.CLOUDFLARED_VERSION) {\n  const file = LINUX_URL[process.arch];\n  if (file === void 0) {\n    throw new import_error.UnsupportedError(\"Unsupported architecture: \" + process.arch);\n  }\n  await download(resolve_base(version) + file, to);\n  import_node_fs.default.chmodSync(to, \"755\");\n  return to;\n}\nasync function install_macos(to, version = import_constants.CLOUDFLARED_VERSION) {\n  const file = MACOS_URL[process.arch];\n  if (file === void 0) {\n    throw new import_error.UnsupportedError(\"Unsupported architecture: \" + process.arch);\n  }\n  await download(resolve_base(version) + file, `${to}.tgz`);\n  process.env.VERBOSE && console.log(`Extracting to ${to}`);\n  (0, import_node_child_process.execSync)(`tar -xzf ${import_node_path.default.basename(`${to}.tgz`)}`, { cwd: import_node_path.default.dirname(to) });\n  import_node_fs.default.unlinkSync(`${to}.tgz`);\n  import_node_fs.default.renameSync(`${import_node_path.default.dirname(to)}/cloudflared`, to);\n  return to;\n}\nasync function install_windows(to, version = import_constants.CLOUDFLARED_VERSION) {\n  const file = WINDOWS_URL[process.arch];\n  if (file === void 0) {\n    throw new import_error.UnsupportedError(\"Unsupported architecture: \" + process.arch);\n  }\n  await download(resolve_base(version) + file, to);\n  return to;\n}\nfunction download(url, to, redirect = 0) {\n  if (redirect === 0) {\n    process.env.VERBOSE && console.log(`Downloading ${url} to ${to}`);\n  } else {\n    process.env.VERBOSE && console.log(`Redirecting to ${url}`);\n  }\n  if (!import_node_fs.default.existsSync(import_node_path.default.dirname(to))) {\n    import_node_fs.default.mkdirSync(import_node_path.default.dirname(to), { recursive: true });\n  }\n  return new Promise((resolve, reject) => {\n    const request = import_node_https.default.get(url, (res) => {\n      const redirect_code = [301, 302, 303, 307, 308];\n      if (redirect_code.includes(res.statusCode) && res.headers.location !== void 0) {\n        request.destroy();\n        const redirection = res.headers.location;\n        resolve(download(redirection, to, redirect + 1));\n        return;\n      }\n      if (res.statusCode && res.statusCode >= 200 && res.statusCode < 300) {\n        const file = import_node_fs.default.createWriteStream(to);\n        file.on(\"finish\", () => {\n          file.close(() => resolve(to));\n        });\n        file.on(\"error\", (err) => {\n          import_node_fs.default.unlink(to, () => reject(err));\n        });\n        res.pipe(file);\n      } else {\n        request.destroy();\n        reject(new Error(`HTTP response with status code: ${res.statusCode}`));\n      }\n    });\n    request.on(\"error\", (err) => {\n      reject(err);\n    });\n    request.end();\n  });\n}\n// Annotate the CommonJS export names for ESM import in node:\n0 && (module.exports = {\n  install,\n  install_linux,\n  install_macos,\n  install_windows\n});\n","\"use strict\";\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar regex_exports = {};\n__export(regex_exports, {\n  config_regex: () => config_regex,\n  conn_regex: () => conn_regex,\n  connectorID_regex: () => connectorID_regex,\n  disconnect_regex: () => disconnect_regex,\n  index_regex: () => index_regex,\n  ip_regex: () => ip_regex,\n  location_regex: () => location_regex,\n  metrics_regex: () => metrics_regex,\n  tunnelID_regex: () => tunnelID_regex\n});\nmodule.exports = __toCommonJS(regex_exports);\nconst conn_regex = /connection[= ]([0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[0-9a-f]{4}-[0-9a-f]{12})/i;\nconst ip_regex = /ip=([0-9.]+)/;\nconst location_regex = /location=([A-Za-z0-9]+)/;\nconst index_regex = /connIndex=(\\d)/;\nconst disconnect_regex = /Unregistered tunnel connection connIndex=(\\d)/i;\nconst tunnelID_regex = /tunnelID=([0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[0-9a-f]{4}-[0-9a-f]{12})/i;\nconst connectorID_regex = /Connector ID: ([0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[0-9a-f]{4}-[0-9a-f]{12})/i;\nconst metrics_regex = /metrics server on ([0-9.:]+\\/metrics)/;\nconst config_regex = /config=\"(.+[^\\\\])\"/;\n// Annotate the CommonJS export names for ESM import in node:\n0 && (module.exports = {\n  config_regex,\n  conn_regex,\n  connectorID_regex,\n  disconnect_regex,\n  index_regex,\n  ip_regex,\n  location_regex,\n  metrics_regex,\n  tunnelID_regex\n});\n","\"use strict\";\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar tunnel_exports = {};\n__export(tunnel_exports, {\n  tunnel: () => tunnel\n});\nmodule.exports = __toCommonJS(tunnel_exports);\nvar import_node_child_process = require(\"node:child_process\");\nvar import_constants = require(\"./constants.js\");\nvar import_regex = require(\"./regex.js\");\nfunction tunnel(options = {}) {\n  const args = [\"tunnel\"];\n  for (const [key, value] of Object.entries(options)) {\n    if (typeof value === \"string\") {\n      args.push(`${key}`, value);\n    } else if (typeof value === \"number\") {\n      args.push(`${key}`, value.toString());\n    } else if (value === null) {\n      args.push(`${key}`);\n    }\n  }\n  if (args.length === 1) {\n    args.push(\"--url\", \"localhost:8080\");\n  }\n  const child = (0, import_node_child_process.spawn)(import_constants.bin, args, { stdio: [\"ignore\", \"pipe\", \"pipe\"] });\n  if (process.env.VERBOSE) {\n    child.stdout.pipe(process.stdout);\n    child.stderr.pipe(process.stderr);\n  }\n  const url_regex = /\\|\\s+(https?:\\/\\/[^\\s]+)/;\n  let url_resolver = () => void 0;\n  let url_rejector = () => void 0;\n  const url = new Promise((...pair) => [url_resolver, url_rejector] = pair);\n  const connection_resolvers = [];\n  const connection_rejectors = [];\n  const connections = [];\n  for (let i = 0; i < 1; i++) {\n    connections.push(new Promise((...pair) => [connection_resolvers[i], connection_rejectors[i]] = pair));\n  }\n  const parser = (data) => {\n    var _a;\n    const str = data.toString();\n    const url_match = str.match(url_regex);\n    url_match && url_resolver(url_match[1]);\n    const conn_match = str.match(import_regex.conn_regex);\n    const ip_match = str.match(import_regex.ip_regex);\n    const location_match = str.match(import_regex.location_regex);\n    const index_match = str.match(import_regex.index_regex);\n    if (conn_match && ip_match && location_match && index_match) {\n      const [, id] = conn_match;\n      const [, ip] = ip_match;\n      const [, location] = location_match;\n      const [, idx] = index_match;\n      (_a = connection_resolvers[+idx]) == null ? void 0 : _a.call(connection_resolvers, { id, ip, location });\n    }\n  };\n  child.stdout.on(\"data\", parser).on(\"error\", url_rejector);\n  child.stderr.on(\"data\", parser).on(\"error\", url_rejector);\n  const stop = () => child.kill(\"SIGINT\");\n  return { url, connections, child, stop };\n}\n// Annotate the CommonJS export names for ESM import in node:\n0 && (module.exports = {\n  tunnel\n});\n","\"use strict\";\nvar __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getProtoOf = Object.getPrototypeOf;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(isNodeMode || !mod || !mod.__esModule ? __defProp(target, \"default\", { value: mod, enumerable: true }) : target, mod));\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar service_exports = {};\n__export(service_exports, {\n  AlreadyInstalledError: () => AlreadyInstalledError,\n  LINUX_SERVICE_PATH: () => LINUX_SERVICE_PATH,\n  MACOS_SERVICE_PATH: () => MACOS_SERVICE_PATH,\n  NotInstalledError: () => NotInstalledError,\n  clean: () => clean,\n  current: () => current,\n  err: () => err,\n  exists: () => exists,\n  identifier: () => identifier,\n  install: () => install,\n  journal: () => journal,\n  log: () => log,\n  service: () => service,\n  service_name: () => service_name,\n  uninstall: () => uninstall\n});\nmodule.exports = __toCommonJS(service_exports);\nvar import_node_os = __toESM(require(\"node:os\"));\nvar import_node_fs = __toESM(require(\"node:fs\"));\nvar import_node_child_process = require(\"node:child_process\");\nvar import_constants = require(\"./constants.js\");\nvar import_regex = require(\"./regex.js\");\nconst identifier = \"com.cloudflare.cloudflared\";\nconst service_name = \"cloudflared.service\";\nconst MACOS_SERVICE_PATH = {\n  PLIST: is_root() ? `/Library/LaunchDaemons/${identifier}.plist` : `${import_node_os.default.homedir()}/Library/LaunchAgents/${identifier}.plist`,\n  OUT: is_root() ? `/Library/Logs/${identifier}.out.log` : `${import_node_os.default.homedir()}/Library/Logs/${identifier}.out.log`,\n  ERR: is_root() ? `/Library/Logs/${identifier}.err.log` : `${import_node_os.default.homedir()}/Library/Logs/${identifier}.err.log`\n};\nconst LINUX_SERVICE_PATH = {\n  SYSTEMD: `/etc/systemd/system/${service_name}`,\n  SERVICE: \"/etc/init.d/cloudflared\",\n  SERVICE_OUT: \"/var/log/cloudflared.log\",\n  SERVICE_ERR: \"/var/log/cloudflared.err\"\n};\nconst service = { install, uninstall, exists, log, err, current, clean, journal };\nclass AlreadyInstalledError extends Error {\n  constructor() {\n    super(\"service is already installed\");\n  }\n}\nclass NotInstalledError extends Error {\n  constructor() {\n    super(\"service is not installed\");\n  }\n}\nfunction install(token) {\n  if (![\"darwin\", \"linux\"].includes(process.platform)) {\n    throw new Error(`Not Implemented on platform ${process.platform}`);\n  }\n  if (exists()) {\n    throw new AlreadyInstalledError();\n  }\n  const args = [\"service\", \"install\"];\n  if (token) {\n    args.push(token);\n  }\n  const result = (0, import_node_child_process.spawnSync)(import_constants.bin, args);\n  if (result.status !== 0) {\n    throw new Error(`service install failed: ${result.stderr.toString()}`);\n  }\n}\nfunction uninstall() {\n  if (![\"darwin\", \"linux\"].includes(process.platform)) {\n    throw new Error(`Not Implemented on platform ${process.platform}`);\n  }\n  if (!exists()) {\n    throw new NotInstalledError();\n  }\n  const result = (0, import_node_child_process.spawnSync)(import_constants.bin, [\"service\", \"uninstall\"]);\n  if (result.status !== 0) {\n    throw new Error(`service uninstall failed: ${result.stderr.toString()}`);\n  }\n  if (process.platform === \"darwin\") {\n    import_node_fs.default.rmSync(MACOS_SERVICE_PATH.OUT);\n    import_node_fs.default.rmSync(MACOS_SERVICE_PATH.ERR);\n  } else if (process.platform === \"linux\" && !is_systemd()) {\n    import_node_fs.default.rmSync(LINUX_SERVICE_PATH.SERVICE_OUT);\n    import_node_fs.default.rmSync(LINUX_SERVICE_PATH.SERVICE_ERR);\n  }\n}\nfunction log() {\n  if (!exists()) {\n    throw new NotInstalledError();\n  }\n  if (process.platform === \"darwin\") {\n    return import_node_fs.default.readFileSync(MACOS_SERVICE_PATH.OUT, \"utf8\");\n  }\n  if (process.platform === \"linux\" && !is_systemd()) {\n    return import_node_fs.default.readFileSync(LINUX_SERVICE_PATH.SERVICE_OUT, \"utf8\");\n  }\n  throw new Error(`Not Implemented on platform ${process.platform}`);\n}\nfunction err() {\n  if (!exists()) {\n    throw new NotInstalledError();\n  }\n  if (process.platform === \"darwin\") {\n    return import_node_fs.default.readFileSync(MACOS_SERVICE_PATH.ERR, \"utf8\");\n  }\n  if (process.platform === \"linux\" && !is_systemd()) {\n    return import_node_fs.default.readFileSync(LINUX_SERVICE_PATH.SERVICE_ERR, \"utf8\");\n  }\n  throw new Error(`Not Implemented on platform ${process.platform}`);\n}\nfunction journal(n = 300) {\n  if (process.platform === \"linux\" && is_systemd()) {\n    const args = [\"-u\", service_name, \"-o\", \"cat\", \"-n\", n.toString()];\n    return (0, import_node_child_process.spawnSync)(\"journalctl\", args).stdout.toString();\n  }\n  throw new Error(`Not Implemented on platform ${process.platform}`);\n}\nfunction current() {\n  var _a, _b, _c, _d;\n  if (![\"darwin\", \"linux\"].includes(process.platform)) {\n    throw new Error(`Not Implemented on platform ${process.platform}`);\n  }\n  if (!exists()) {\n    throw new NotInstalledError();\n  }\n  const log2 = is_systemd() ? journal() : err();\n  let tunnelID = \"\";\n  let connectorID = \"\";\n  const connections = [];\n  let metrics = \"\";\n  let config = {};\n  for (const line of log2.split(\"\\n\")) {\n    try {\n      if (line.match(import_regex.tunnelID_regex)) {\n        tunnelID = ((_a = line.match(import_regex.tunnelID_regex)) == null ? void 0 : _a[1]) ?? \"\";\n      } else if (line.match(import_regex.connectorID_regex)) {\n        connectorID = ((_b = line.match(import_regex.connectorID_regex)) == null ? void 0 : _b[1]) ?? \"\";\n      } else if (line.match(import_regex.conn_regex) && line.match(import_regex.location_regex) && line.match(import_regex.ip_regex) && line.match(import_regex.index_regex)) {\n        const [, id] = line.match(import_regex.conn_regex) ?? [];\n        const [, location] = line.match(import_regex.location_regex) ?? [];\n        const [, ip] = line.match(import_regex.ip_regex) ?? [];\n        const [, idx] = line.match(import_regex.index_regex) ?? [];\n        connections[parseInt(idx)] = { id, ip, location };\n      } else if (line.match(import_regex.disconnect_regex)) {\n        const [, idx] = line.match(import_regex.disconnect_regex) ?? [];\n        if (parseInt(idx) in connections) {\n          connections[parseInt(idx)] = { id: \"\", ip: \"\", location: \"\" };\n        }\n      } else if (line.match(import_regex.metrics_regex)) {\n        metrics = ((_c = line.match(import_regex.metrics_regex)) == null ? void 0 : _c[1]) ?? \"\";\n      } else if (line.match(import_regex.config_regex)) {\n        config = JSON.parse(((_d = line.match(import_regex.config_regex)) == null ? void 0 : _d[1].replace(/\\\\/g, \"\")) ?? \"{}\");\n      }\n    } catch (err2) {\n      if (process.env.VERBOSE) {\n        console.error(\"log parsing failed\", err2);\n      }\n    }\n  }\n  return { tunnelID, connectorID, connections, metrics, config };\n}\nfunction clean() {\n  if (process.platform !== \"darwin\") {\n    throw new Error(`Not Implemented on platform ${process.platform}`);\n  }\n  if (exists()) {\n    throw new AlreadyInstalledError();\n  }\n  import_node_fs.default.rmSync(MACOS_SERVICE_PATH.OUT, { force: true });\n  import_node_fs.default.rmSync(MACOS_SERVICE_PATH.ERR, { force: true });\n}\nfunction exists() {\n  if (process.platform === \"darwin\") {\n    return import_node_fs.default.existsSync(MACOS_SERVICE_PATH.PLIST);\n  } else if (process.platform === \"linux\") {\n    return is_systemd() ? import_node_fs.default.existsSync(LINUX_SERVICE_PATH.SYSTEMD) : import_node_fs.default.existsSync(LINUX_SERVICE_PATH.SERVICE);\n  }\n  throw new Error(`Not Implemented on platform ${process.platform}`);\n}\nfunction is_root() {\n  var _a;\n  return ((_a = process.getuid) == null ? void 0 : _a.call(process)) === 0;\n}\nfunction is_systemd() {\n  return process.platform === \"linux\" && import_node_fs.default.existsSync(\"/run/systemd/system\");\n}\n// Annotate the CommonJS export names for ESM import in node:\n0 && (module.exports = {\n  AlreadyInstalledError,\n  LINUX_SERVICE_PATH,\n  MACOS_SERVICE_PATH,\n  NotInstalledError,\n  clean,\n  current,\n  err,\n  exists,\n  identifier,\n  install,\n  journal,\n  log,\n  service,\n  service_name,\n  uninstall\n});\n","\"use strict\";\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar lib_exports = {};\n__export(lib_exports, {\n  AlreadyInstalledError: () => import_service.AlreadyInstalledError,\n  MACOS_SERVICE_PATH: () => import_service.MACOS_SERVICE_PATH,\n  NotInstalledError: () => import_service.NotInstalledError,\n  bin: () => import_constants.bin,\n  identifier: () => import_service.identifier,\n  install: () => import_install.install,\n  service: () => import_service.service,\n  tunnel: () => import_tunnel.tunnel\n});\nmodule.exports = __toCommonJS(lib_exports);\nvar import_constants = require(\"./constants.js\");\nvar import_install = require(\"./install.js\");\nvar import_tunnel = require(\"./tunnel.js\");\nvar import_service = require(\"./service.js\");\n// Annotate the CommonJS export names for ESM import in node:\n0 && (module.exports = {\n  AlreadyInstalledError,\n  MACOS_SERVICE_PATH,\n  NotInstalledError,\n  bin,\n  identifier,\n  install,\n  service,\n  tunnel\n});\n","export { dev } from './dev.js';\n","import { createVeloCLIServer } from '@wix/editor-velo-cli-comm-api';\nimport { openBrowser } from '@wix/user-browser';\nimport { asyncExitHook } from 'exit-hook';\nimport { CliError, CliErrorCode } from '@wix/cli-error';\nimport { ErrorViewer } from '@wix/cli-error-reporting';\nimport { writeCrashReport } from '@wix/cli-debug-log';\nimport { getDebugLogFilePath } from '@wix/cli-core-definitions';\nimport type { CommandServices } from '@wix/cli-command-contract';\nimport { createElement } from 'react';\nimport { renderSync } from '@wix/cli-ui-kit';\nimport { createHttpClient, isHttpError } from '@wix/cli-http-client';\nimport type { Connection } from '@wix/cli-tunnel';\nimport { TunnelClient, launchTunnel } from '@wix/cli-tunnel';\nimport { getDevEditorBaseUrl } from '../environment.js';\nimport { createMutableGridApp } from '../gridapp/createGridApp.js';\nimport { startGridAppUpdater } from '../gridapp/startGridAppUpdater.js';\nimport { KeyWatcher } from '../key-watcher.js';\nimport type { ProjectModel } from '../model.js';\nimport { saveProjectModel } from '../model.js';\nimport { createLogger } from '../logger.js';\nimport { sitesBiEvents } from '../bi.js';\nimport { createI18nT } from '../i18n.js';\nimport { authenticate } from '../authentication.js';\nimport { syncAllToRevision } from './sync-all-to-revision.js';\n\nexport async function dev(\n  initialModel: ProjectModel,\n  { biLogger, errorReporter }: CommandServices,\n  {\n    https = false,\n    tunnel: useTunnel = false,\n  }: {\n    https?: boolean;\n    tunnel?: boolean;\n  }\n) {\n  let model = initialModel;\n  const authState = await authenticate({\n    metaSiteId: model.metaSiteId,\n    biLogger,\n    errorReporter,\n  });\n\n  const t = createI18nT();\n  const logger = createLogger({ t });\n  const biEvents = sitesBiEvents(biLogger);\n\n  const server = createVeloCLIServer({ https });\n\n  let gridAppId: string;\n  try {\n    gridAppId = await createMutableGridApp(model.projectFolder, {\n      authState,\n    });\n  } catch (error) {\n    const message = isHttpError(error) && error.response?.data?.message;\n\n    throw new CliError({\n      code: CliErrorCode.FailedToCreateGridApp({\n        error: message,\n      }),\n      cause: error,\n    });\n  }\n\n  await syncAllToRevision(model, { authState }, logger);\n\n  const { close } = startGridAppUpdater(\n    model,\n    gridAppId,\n    {\n      authState,\n      onError(error) {\n        logger.logNewLine();\n        errorReporter.reportError(error);\n        writeCrashReport(getDebugLogFilePath(model.projectFolder), error);\n        renderSync(createElement(ErrorViewer, { error }));\n      },\n    },\n    logger,\n    biEvents\n  );\n\n  const onServerDisconnected = (devEditorUrl: string) => {\n    const message = logger.logNoOpenedTab(devEditorUrl);\n    biEvents.messageDisplayed({ model, message });\n  };\n\n  const onSyncDevEditorChanges = async (revision: string) => {\n    if (revision !== model.revision) {\n      const newModel = { ...model, revision };\n\n      await saveProjectModel(newModel);\n      const message = logger.logUpdatedLocalCodeToRevision({\n        revision: newModel.revision,\n      });\n      biEvents.messageDisplayed({ message, model });\n\n      await syncAllToRevision(newModel, { authState }, logger);\n\n      model = newModel;\n    }\n  };\n\n  const openLocalEditor = async (serverPort: number) => {\n    biEvents.userResponse({\n      action: 'Browser opened',\n      message: 'Opening the Local Editor',\n      model,\n    });\n\n    const devEditorUrl = getDevEditorUrl(serverPort);\n\n    if (https) {\n      await openBrowser(new URL(`https://localhost:${serverPort}`).href);\n    } else {\n      await openBrowser(devEditorUrl);\n    }\n  };\n\n  let keyWatcher: KeyWatcher | undefined;\n  let tunnel: Connection | undefined;\n\n  const getDevEditorUrl = (serverPort: number) => {\n    const url = new URL(model.metaSiteId, getDevEditorBaseUrl());\n\n    if (tunnel) {\n      url.searchParams.append('localEditorDestination', tunnel.domain);\n    } else {\n      url.searchParams.append('localPort', serverPort.toString());\n    }\n\n    url.searchParams.append('secureSocket', https.toString());\n\n    return url.toString();\n  };\n\n  try {\n    const { port: serverPort } = await server.serve(gridAppId, {\n      getDevEditorUrl,\n    });\n\n    if (useTunnel) {\n      const httpClient = createHttpClient({\n        type: 'backoffice',\n        getAppToken: authState.getAccessToken,\n      });\n      const tunnelClient = new TunnelClient(httpClient);\n      tunnel = await launchTunnel(serverPort, tunnelClient);\n    }\n\n    const devEditorUrl = getDevEditorUrl(serverPort);\n\n    server.on('disconnected', () => onServerDisconnected(devEditorUrl));\n    server.on('syncDevEditorChanges', onSyncDevEditorChanges);\n\n    keyWatcher = new KeyWatcher();\n\n    logger.logOpeningBrowser(https);\n\n    await openLocalEditor(serverPort);\n    const { ctrlCPromise } = keyWatcher.watch();\n    keyWatcher.on('e', () => openLocalEditor(serverPort));\n\n    asyncExitHook(\n      async () => {\n        await server.close();\n        tunnel?.close();\n      },\n      { wait: 500 }\n    );\n    await ctrlCPromise;\n  } finally {\n    keyWatcher?.unwatch();\n    await Promise.all([server.close(), close(), tunnel?.close()]);\n  }\n}\n","import process from 'node:process';\n\nconst asyncCallbacks = new Set();\nconst callbacks = new Set();\n\nlet isCalled = false;\nlet isRegistered = false;\n\nasync function exit(shouldManuallyExit, isSynchronous, signal) {\n\tif (isCalled) {\n\t\treturn;\n\t}\n\n\tisCalled = true;\n\n\tif (asyncCallbacks.size > 0 && isSynchronous) {\n\t\tconsole.error([\n\t\t\t'SYNCHRONOUS TERMINATION NOTICE:',\n\t\t\t'When explicitly exiting the process via process.exit or via a parent process,',\n\t\t\t'asynchronous tasks in your exitHooks will not run. Either remove these tasks,',\n\t\t\t'use gracefulExit() instead of process.exit(), or ensure your parent process',\n\t\t\t'sends a SIGINT to the process running this code.',\n\t\t].join(' '));\n\t}\n\n\tconst exitCode = 128 + signal;\n\n\tconst done = (force = false) => {\n\t\tif (force === true || shouldManuallyExit === true) {\n\t\t\tprocess.exit(exitCode); // eslint-disable-line unicorn/no-process-exit\n\t\t}\n\t};\n\n\tfor (const callback of callbacks) {\n\t\tcallback(exitCode);\n\t}\n\n\tif (isSynchronous) {\n\t\tdone();\n\t\treturn;\n\t}\n\n\tconst promises = [];\n\tlet forceAfter = 0;\n\tfor (const [callback, wait] of asyncCallbacks) {\n\t\tforceAfter = Math.max(forceAfter, wait);\n\t\tpromises.push(Promise.resolve(callback(exitCode)));\n\t}\n\n\t// Force exit if we exceeded our wait value\n\tconst asyncTimer = setTimeout(() => {\n\t\tdone(true);\n\t}, forceAfter);\n\n\tawait Promise.all(promises);\n\tclearTimeout(asyncTimer);\n\tdone();\n}\n\nfunction addHook(options) {\n\tconst {onExit, wait, isSynchronous} = options;\n\tconst asyncCallbackConfig = [onExit, wait];\n\n\tif (isSynchronous) {\n\t\tcallbacks.add(onExit);\n\t} else {\n\t\tasyncCallbacks.add(asyncCallbackConfig);\n\t}\n\n\tif (!isRegistered) {\n\t\tisRegistered = true;\n\n\t\t// Exit cases that support asynchronous handling\n\t\tprocess.once('beforeExit', exit.bind(undefined, true, false, -128));\n\t\tprocess.once('SIGINT', exit.bind(undefined, true, false, 2));\n\t\tprocess.once('SIGTERM', exit.bind(undefined, true, false, 15));\n\n\t\t// Explicit exit events. Calling will force an immediate exit and run all\n\t\t// synchronous hooks. Explicit exits must not extend the node process\n\t\t// artificially. Will log errors if asynchronous calls exist.\n\t\tprocess.once('exit', exit.bind(undefined, false, true, 0));\n\n\t\t// PM2 Cluster shutdown message. Caught to support async handlers with pm2,\n\t\t// needed because explicitly calling process.exit() doesn't trigger the\n\t\t// beforeExit event, and the exit event cannot support async handlers,\n\t\t// since the event loop is never called after it.\n\t\tprocess.on('message', message => {\n\t\t\tif (message === 'shutdown') {\n\t\t\t\texit(true, true, -128);\n\t\t\t}\n\t\t});\n\t}\n\n\treturn () => {\n\t\tif (isSynchronous) {\n\t\t\tcallbacks.delete(onExit);\n\t\t} else {\n\t\t\tasyncCallbacks.delete(asyncCallbackConfig);\n\t\t}\n\t};\n}\n\nexport default function exitHook(onExit) {\n\tif (typeof onExit !== 'function') {\n\t\tthrow new TypeError('onExit must be a function');\n\t}\n\n\treturn addHook({\n\t\tonExit,\n\t\tisSynchronous: true,\n\t});\n}\n\nexport function asyncExitHook(onExit, options = {}) {\n\tif (typeof onExit !== 'function') {\n\t\tthrow new TypeError('onExit must be a function');\n\t}\n\n\tif (!(typeof options.wait === 'number' && options.wait > 0)) {\n\t\tthrow new TypeError('wait must be set to a positive numeric value');\n\t}\n\n\treturn addHook({\n\t\tonExit,\n\t\twait: options.wait,\n\t\tisSynchronous: false,\n\t});\n}\n\nexport function gracefulExit(signal = 0) {\n\texit(true, false, -128 + signal);\n}\n","export { useTunnel } from './useTunnel.js';\nexport { launchTunnel } from './tunnel.js';\nexport { TunnelClient } from './client.js';\nexport type { Connection } from './tunnel.js';\n","import { execa } from 'execa';\nimport { pathExists } from '@wix/cli-fs';\nimport { dirname } from 'node:path';\nimport { CliError, CliErrorCode } from '@wix/cli-error';\nimport { getTestOverrides } from '@wix/cli-test-overrides';\nimport { bin, install } from 'cloudflared';\nimport type { TunnelClient } from './client.js';\n\nexport interface Connection {\n  close: () => void;\n  domain: string;\n}\n\nexport async function launchTunnel(\n  port: number,\n  tunnelClient: TunnelClient\n): Promise<Connection> {\n  const { localTunnel } = getTestOverrides();\n\n  if (!localTunnel && !(await pathExists(bin))) {\n    try {\n      await install(bin);\n    } catch (e) {\n      const err = e as NodeJS.ErrnoException;\n      if (e instanceof Error && err.code === 'EACCES') {\n        throw new CliError({\n          code: CliErrorCode.FailedInstallCloudflareNoAccess({\n            path: dirname(err.path!),\n          }),\n          cause: e,\n        });\n      }\n      throw e;\n    }\n  }\n\n  const tunnel = await tunnelClient.createTunnel({ port });\n  const domain = `http${localTunnel ? '' : 's'}://${tunnel.domain}`;\n\n  const createTunnelPromise = new Promise<Connection>((resolve, reject) => {\n    const tunnelProcess = localTunnel\n      ? execa('echo', [tunnel.domain, tunnel.token], { detached: true })\n      : execa(bin, ['tunnel', 'run', '--token', tunnel.token]);\n\n    const close = () => {\n      tunnelProcess.kill();\n    };\n\n    const listener = async (data: Buffer) => {\n      const output = data.toString();\n      const match = output.match(tunnel.domain)?.[0];\n\n      if (match) {\n        resolve({\n          domain,\n          close,\n        });\n      }\n    };\n\n    tunnelProcess.stderr?.on('data', listener);\n    tunnelProcess.stdout?.on('data', listener);\n\n    // eslint-disable-next-line @typescript-eslint/no-floating-promises\n    tunnelProcess.on('error', (err) => {\n      reject(err);\n    });\n  });\n\n  return {\n    domain,\n    close: async () => {\n      const tunnel = await createTunnelPromise;\n      return tunnel.close();\n    },\n  };\n}\n","import type { HttpClient } from '@wix/cli-http-client';\nimport type { Options } from 'p-retry';\nimport pRetry from 'p-retry';\nimport {\n  createTunnel,\n  deleteTunnel,\n} from '@wix/ambassador-apps-hosting-v1-deployment/http';\nimport { CliError, CliErrorCode } from '@wix/cli-error';\nimport { getTestOverrides } from '@wix/cli-test-overrides';\nimport { createTunnelSchema } from './schemas.js';\n\nexport class TunnelClient {\n  private readonly retryOptions: Options;\n\n  constructor(private readonly httpClient: HttpClient) {\n    const { minRetryTimeout } = getTestOverrides();\n\n    this.retryOptions = {\n      retries: 3,\n      minTimeout: minRetryTimeout,\n      maxTimeout: 3 * 1000,\n    };\n  }\n\n  public createTunnel = async ({ port }: { port: number }) => {\n    try {\n      const { data } = await pRetry(\n        () => this.httpClient.request(createTunnel({ port })),\n        this.retryOptions\n      );\n\n      return createTunnelSchema.parse(data);\n    } catch (error) {\n      throw new CliError({\n        code: CliErrorCode.FailedToCreateTunnel(),\n        cause: error,\n      });\n    }\n  };\n\n  public deleteTunnel = async (tunnelId: string) => {\n    try {\n      await pRetry(\n        () => this.httpClient.request(deleteTunnel({ id: tunnelId })),\n        this.retryOptions\n      );\n    } catch (error) {\n      throw new CliError({\n        code: CliErrorCode.FailedToDeleteTunnel(),\n        cause: error,\n      });\n    }\n  };\n}\n",null,"import { z } from 'zod';\n\nexport const createTunnelSchema = z.object({\n  id: z.string(),\n  token: z.string(),\n  domain: z.string(),\n});\n","import { getTestOverrides } from '@wix/cli-test-overrides';\n\nconst DEV_EDITOR_BASE_URL = 'https://wix.com/editor/';\n\nexport function getDevEditorBaseUrl(): string {\n  return getTestOverrides().devEditorBaseUrl ?? DEV_EDITOR_BASE_URL;\n}\n","import type { AuthState } from '@wix/cli-auth';\nimport { createApp } from '@wix/ambassador-velo-apps-v1-app/http';\nimport type {\n  App,\n  CreateAppRequest,\n} from '@wix/ambassador-velo-apps-v1-app/types';\nimport { AppType } from '@wix/ambassador-velo-apps-v1-app/types';\nimport { CliError, CliErrorCode } from '@wix/cli-error';\nimport { httpRequest } from '../http-request.js';\nimport { catchFilesMaxSizeError } from './error-handlers/maxFileSizeErrorHandler.js';\nimport { loadProjectGridAppContent } from './loadProjectGridAppContent.js';\n\nasync function createAppWithParams(\n  params: CreateAppRequest,\n  opts: {\n    authState: AuthState;\n  }\n): Promise<string> {\n  let app: App | undefined;\n\n  try {\n    const response = await httpRequest(\n      { type: 'code', authState: opts.authState },\n      createApp(params)\n    );\n    app = response.data.app;\n  } catch (err) {\n    catchFilesMaxSizeError(err, params.content?.files);\n\n    throw err;\n  }\n\n  if (!app?.id) {\n    throw new CliError({\n      code: CliErrorCode.InvalidCreateAppResponse(),\n      info: { app },\n      cause: null,\n    });\n  }\n\n  return app.id;\n}\n\nexport async function createMutableGridApp(\n  projectFolder: string,\n  opts: {\n    authState: AuthState;\n  }\n) {\n  const content = await loadProjectGridAppContent(projectFolder);\n\n  return createAppWithParams(\n    {\n      app: {\n        mutable: true,\n        appType: AppType.VELO_ISOLATED,\n      },\n      content,\n    },\n    opts\n  );\n}\n","import type { File } from '@wix/ambassador-velo-apps-v1-app/types';\nimport { CliError, CliErrorCode } from '@wix/cli-error';\nimport { extractHttpError } from '@wix/cli-http-client';\n\nexport function catchFilesMaxSizeError(err: unknown, files: File[] = []) {\n  if (!files.length) {\n    return;\n  }\n\n  const httpError = extractHttpError(err);\n\n  if (!httpError) {\n    return;\n  }\n\n  const filesMaxSizeRawViolations =\n    httpError.response?.data?.details?.validationError?.fieldViolations?.filter(\n      (v: { violatedRule: string }) => v.violatedRule === 'MAX_LENGTH'\n    );\n\n  if (!filesMaxSizeRawViolations?.length) {\n    return;\n  }\n\n  const maxSizeViolationsData = tryExtractMaxSizeViolationMetadata(\n    filesMaxSizeRawViolations\n  );\n\n  throw new CliError({\n    code: CliErrorCode.GridAppFilesMaxLengthExceeded({\n      maxSizeViolationsData,\n      filePaths: files.map((f) => f.path ?? '[unknown file path]'),\n    }),\n    cause: httpError,\n  });\n}\n\nfunction tryExtractMaxSizeViolationMetadata(\n  filesMaxSizeViolations: Array<{ field: string; description: string }>\n) {\n  const fileIndexRegex = /\\[(?<fileIndex>\\d+)\\].content/;\n  const expectedAndReceivedSizeRegex =\n    /has size (?<receivedSize>\\d+), expected (?<expectedSize>\\d+) or less/;\n  const violationsData: {\n    expectedSize?: number;\n    files: Array<{ fileIndex: number; receivedSize: number }>;\n  } = {\n    expectedSize: undefined,\n    files: [],\n  };\n\n  for (const filesMaxSizeViolation of filesMaxSizeViolations) {\n    const fileIndexMatchResult = fileIndexRegex.exec(\n      filesMaxSizeViolation.field\n    );\n    const expectedAndReceivedSizeMatchResult =\n      expectedAndReceivedSizeRegex.exec(filesMaxSizeViolation.description);\n\n    if (\n      !(\n        fileIndexMatchResult?.groups?.fileIndex &&\n        expectedAndReceivedSizeMatchResult?.groups?.receivedSize &&\n        expectedAndReceivedSizeMatchResult.groups.expectedSize\n      )\n    ) {\n      return null;\n    }\n\n    violationsData.expectedSize ??= Math.trunc(\n      parseInt(expectedAndReceivedSizeMatchResult.groups.expectedSize, 10) /\n        1000\n    );\n\n    violationsData.files.push({\n      receivedSize: Math.trunc(\n        parseInt(expectedAndReceivedSizeMatchResult.groups.receivedSize, 10) /\n          1000\n      ),\n      fileIndex: parseInt(fileIndexMatchResult.groups.fileIndex, 10),\n    });\n  }\n\n  return violationsData;\n}\n","import { readFile } from 'node:fs/promises';\nimport { join } from 'node:path';\nimport type { AuthState } from '@wix/cli-auth';\nimport { updateFiles } from '@wix/ambassador-velo-ide-v1-gridapp-filestructure/http';\nimport { GridAppLayout } from '@wix/ambassador-velo-ide-v1-gridapp-filestructure/types';\nimport { getSourceFolder } from '@wix/velo-github-layout-definitions';\nimport { watch } from 'chokidar';\nimport { debounceQueue } from '@wix/debounce-queue';\nimport pLimit from 'p-limit';\nimport normalizePath from 'normalize-path';\nimport { CliError, CliErrorCode } from '@wix/cli-error';\nimport { httpRequest } from '../http-request.js';\nimport type { ProjectModel } from '../model.js';\nimport type { Logger } from '../logger.js';\nimport type { SitesBiEvents } from '../bi.js';\nimport { catchFilesMaxSizeError } from './error-handlers/maxFileSizeErrorHandler.js';\n\ntype ChokidarEventParams = [\n  'add' | 'addDir' | 'change' | 'unlink' | 'unlinkDir',\n  string,\n];\n\nconst WATCH_FS_EVENTS_DEBOUNCE_TIME = 1000;\n\nconst getSectionName = (path: string) => {\n  if (path.startsWith('src/pages')) {\n    return 'public';\n  }\n  if (path.startsWith('src/backend')) {\n    return 'backend';\n  }\n  return 'other';\n};\n\nexport function startGridAppUpdater(\n  model: ProjectModel,\n  gridAppId: string,\n  opts: {\n    onError: (e: CliError) => void;\n    authState: AuthState;\n  },\n  logger: Logger,\n  biEvents: SitesBiEvents\n) {\n  const { projectFolder } = model;\n  const limit = pLimit(1);\n\n  const watcher = watch(getSourceFolder(projectFolder), {\n    disableGlobbing: true,\n    cwd: projectFolder,\n    ignoreInitial: true,\n  })\n    .on(\n      'all',\n      debounceQueue(async (events: ChokidarEventParams[]) => {\n        await limit(async () => {\n          const logSynced = logger.logSyncingLocalCode();\n          const { added, changed, removed } =\n            normalizeChokidarBatchedEvents(events);\n          const addedArray = Array.from(added.values()).map((path) => ({\n            path,\n            type: 'create',\n          }));\n          const changedArray = Array.from(changed.values()).map((path) => ({\n            path,\n            type: 'update',\n          }));\n          const removedArray = Array.from(removed.values()).map((path) => ({\n            path,\n            type: 'delete',\n          }));\n\n          for (const val of [...addedArray, ...changedArray, ...removedArray]) {\n            biEvents.file({\n              model,\n              action: val.type as 'create' | 'update' | 'delete',\n              path: val.path,\n              oldPath: '',\n              sectionName: getSectionName(val.path),\n            });\n            if (val.type === 'update') {\n              biEvents.codeChanged(model, val.path);\n            }\n          }\n\n          try {\n            await writeFiles({\n              filesToUpdate: await Promise.all(\n                addedArray.concat(changedArray).map(async (val) => ({\n                  path: normalizePath(val.path),\n                  content: await readFile(\n                    join(projectFolder, val.path),\n                    'utf8'\n                  ),\n                }))\n              ),\n              removedArray,\n              gridAppId,\n              authState: opts.authState,\n            });\n\n            const message = logSynced.success();\n            biEvents.messageDisplayed({ message, model });\n            biEvents.readyForReloadAfterCodeChanged(model);\n          } catch (e) {\n            logSynced.fail();\n            const error = new CliError({\n              code: CliErrorCode.GridAppFailedToUpdateFiles(),\n              cause: e,\n              info: {\n                added,\n                changed,\n                removed,\n              },\n            });\n            opts.onError(error);\n          }\n        });\n      }, WATCH_FS_EVENTS_DEBOUNCE_TIME)\n    )\n    .on('error', (e) => {\n      const error = new CliError({\n        code: CliErrorCode.FailedToWatchFiles(),\n        cause: e,\n      });\n\n      opts.onError(error);\n    });\n\n  return { close: () => watcher.close() };\n}\n\nfunction normalizeChokidarBatchedEvents(events: ChokidarEventParams[]) {\n  return events.reduce(\n    (result, [eventType, filePath]) => {\n      switch (eventType) {\n        case 'add': {\n          result.added.add(filePath);\n          break;\n        }\n        case 'change': {\n          result.changed.add(filePath);\n          break;\n        }\n        case 'unlink': {\n          result.added.delete(filePath);\n          result.changed.delete(filePath);\n          result.removed.add(filePath);\n          break;\n        }\n        case 'unlinkDir': {\n          const filePathAsDir = filePath.endsWith('/')\n            ? filePath\n            : `${filePath}/`;\n          for (const filePath of result.added) {\n            if (filePath.startsWith(filePathAsDir)) {\n              result.added.delete(filePath);\n            }\n          }\n          for (const filePath of result.changed) {\n            if (filePath.startsWith(filePathAsDir)) {\n              result.changed.delete(filePath);\n            }\n          }\n          result.removed.add(filePath);\n          break;\n        }\n        case 'addDir': {\n          break;\n        }\n      }\n      return result;\n    },\n    {\n      added: new Set<string>(),\n      changed: new Set<string>(),\n      removed: new Set<string>(),\n    }\n  );\n}\n\nasync function writeFiles({\n  filesToUpdate,\n  removedArray,\n  gridAppId,\n  authState,\n}: {\n  filesToUpdate: Array<{ path: string; content: string }>;\n  removedArray: Array<{ path: string; type: string }>;\n  gridAppId: string;\n  authState: AuthState;\n}) {\n  try {\n    await httpRequest(\n      {\n        type: 'code',\n        authState,\n      },\n      updateFiles({\n        gridAppId,\n        layout: GridAppLayout.GITHUB,\n        filesToUpdate,\n        ignoreForbiddenPaths: true,\n        pathsToDelete: removedArray.map((val) => val.path),\n      })\n    );\n  } catch (err) {\n    catchFilesMaxSizeError(err, filesToUpdate);\n    throw err;\n  }\n}\n","import readline from 'node:readline';\nimport { stdin } from 'node:process';\n\ninterface Key {\n  ctrl: boolean;\n  name: string;\n  sequence: string;\n  meta: boolean;\n  shift: boolean;\n}\n\ntype Callback = (key: Key) => void;\nexport class KeyWatcher {\n  private actions = new Map<string, Callback>();\n\n  private watchExitProcess() {\n    return new Promise<void>((resolve) => {\n      this.on('c', (key) => {\n        if (key.ctrl) {\n          resolve();\n        }\n      });\n    });\n  }\n\n  on(key: string, callback: Callback) {\n    this.actions.set(key, callback);\n  }\n\n  watch() {\n    const rl = readline.createInterface(stdin);\n\n    readline.emitKeypressEvents(stdin, rl);\n\n    if (stdin.isTTY) {\n      // This is required since in test we don't have a terminal and setRawMode is undefined\n      stdin.setRawMode(true);\n      stdin.setEncoding('utf8');\n    }\n\n    stdin.on('keypress', this.handleKeyPress);\n\n    return {\n      ctrlCPromise: this.watchExitProcess(),\n    };\n  }\n\n  unwatch() {\n    if (stdin.isTTY) {\n      // This is required since in test we don't have a terminal and setRawMode is undefined\n      stdin.setRawMode(false);\n    }\n    stdin.off('keypress', this.handleKeyPress);\n    stdin.pause();\n    this.actions.clear();\n  }\n\n  handleKeyPress = (_: string, key: Key) => {\n    this.actions.get(key.name)?.(key);\n  };\n}\n","import { randomUUID } from 'node:crypto';\nimport {\n  wixCliFileFolderCreatedRenamedDeleted,\n  wixCliCliMessageDisplayed,\n  wixCliCodeHasBeenChanged,\n  wixCliUserResponseToCliMessage,\n  wixCliReadyForReloadAfterCodeChange,\n} from '@wix/bi-logger-wix-cli/v2';\nimport type { BiLogger } from '@wix/cli-telemetry';\nimport type { ProjectModel } from './model.js';\n\nexport const sitesBiEvents = (biLogger: BiLogger) => ({\n  file: ({\n    model,\n    action,\n    path,\n    sectionName,\n    oldPath,\n  }: {\n    model: ProjectModel;\n    action: 'create' | 'update' | 'delete';\n    path: string;\n    sectionName: string;\n    oldPath: string;\n  }) => {\n    void biLogger.report(\n      wixCliFileFolderCreatedRenamedDeleted({\n        action,\n        path,\n        sectionName,\n        oldPath,\n        siteRevision: Number(model.revision),\n      })\n    );\n  },\n  codeChanged: (model: ProjectModel, fileName: string) => {\n    void biLogger.report(\n      wixCliCodeHasBeenChanged({\n        fileName,\n        siteRevision: Number(model.revision),\n      })\n    );\n  },\n  readyForReloadAfterCodeChanged: (model: ProjectModel) => {\n    void biLogger.report(\n      wixCliReadyForReloadAfterCodeChange({\n        siteRevision: Number(model.revision),\n      })\n    );\n  },\n  messageDisplayed: ({\n    message,\n    model,\n  }: {\n    message: string;\n    model: ProjectModel;\n  }) => {\n    void biLogger.report(\n      wixCliCliMessageDisplayed({\n        message,\n        messageId: randomUUID(),\n        siteRevision: Number(model.revision),\n      })\n    );\n  },\n  userResponse: ({\n    model,\n    action,\n    message,\n  }: {\n    model: ProjectModel;\n    action: 'Browser opened';\n    message: string;\n  }) => {\n    void biLogger.report(\n      wixCliUserResponseToCliMessage({\n        action,\n        message,\n        messageId: randomUUID(),\n        siteRevision: Number(model.revision),\n      })\n    );\n  },\n});\n\nexport type SitesBiEvents = ReturnType<typeof sitesBiEvents>;\n","import { rm } from 'node:fs/promises';\nimport type { AuthState } from '@wix/cli-auth';\nimport { writeCrashReport } from '@wix/cli-debug-log';\nimport { getTypesDir } from '@wix/velo-github-layout-definitions';\nimport { getDebugLogFilePath } from '@wix/cli-core-definitions';\nimport type { ProjectModel } from '../model.js';\nimport { syncPages } from '../sources/index.js';\nimport { syncTypesWithAuth } from '../sync-types/index.js';\nimport type { Logger } from '../logger.js';\n\nexport async function syncAllToRevision(\n  model: ProjectModel,\n  opts: {\n    authState: AuthState;\n  },\n  logger: Logger\n) {\n  const logTypesSynced = logger.logSyncingTypesToRevision(model.revision);\n  try {\n    await syncTypesWithAuth(model, { authState: opts.authState });\n    logTypesSynced.success();\n  } catch (error) {\n    // As a workaround until the types sync can handle large projects, this error is recoverable\n    writeCrashReport(getDebugLogFilePath(model.projectFolder), error);\n    logTypesSynced.fail();\n    await rm(getTypesDir(model.projectFolder), {\n      recursive: true,\n      force: true,\n    }).catch((e: unknown) => {\n      writeCrashReport(getDebugLogFilePath(model.projectFolder), e);\n      logger.logRecoverableFailureToRemoveTypesDir(e);\n    });\n  }\n\n  const logPagesSynced = logger.logSyncingPagesToRevision(model.revision);\n  try {\n    await syncPages(model, { authState: opts.authState });\n    logPagesSynced.success();\n  } catch (error) {\n    logPagesSynced.fail();\n    throw error;\n  }\n}\n","import { readdir } from 'node:fs/promises';\nimport { pagesDiff } from '@wix/ambassador-velo-apps-v1-app/http';\nimport type { PagesDiffRequest } from '@wix/ambassador-velo-apps-v1-app/types';\nimport { GridAppLayout } from '@wix/ambassador-velo-apps-v1-app/types';\nimport {\n  getPagesFolder,\n  getSourceFolder,\n} from '@wix/velo-github-layout-definitions';\nimport type { AuthState } from '@wix/cli-auth';\nimport { CliError, CliErrorCode } from '@wix/cli-error';\nimport { pathExists } from '@wix/cli-fs';\nimport { httpRequest } from '../http-request.js';\nimport type { ProjectModel } from '../model.js';\nimport { createPages, deletePages, renamePages } from './pages-diff.js';\n\nexport async function syncPages(\n  model: ProjectModel,\n  opts: {\n    authState: AuthState;\n  }\n): Promise<void> {\n  const pagesFolder = getPagesFolder(model.projectFolder);\n\n  if (!(await pathExists(pagesFolder))) {\n    throw new CliError({\n      code: CliErrorCode.NoPagesDirectoryFound({\n        srcDir: getSourceFolder(model.projectFolder),\n      }),\n      cause: null,\n    });\n  }\n\n  const params: PagesDiffRequest = {\n    layout: GridAppLayout.GITHUB,\n    sourcePagesPaths: await readdir(pagesFolder),\n    targetRevision: model.revision,\n  };\n  const { data } = await httpRequest(\n    {\n      authState: opts.authState,\n      type: 'code',\n    },\n    pagesDiff(params)\n  ).catch((e: unknown) => {\n    throw new CliError({\n      code: CliErrorCode.FailedToGetPagesDiff(),\n      cause: e,\n      info: { ...params },\n    });\n  });\n\n  await Promise.all([\n    createPages(model.projectFolder, data.pagesDiff?.created ?? []),\n    renamePages(model.projectFolder, data.pagesDiff?.renamed ?? []),\n    deletePages(model.projectFolder, data.pagesDiff?.deleted ?? []),\n  ]);\n}\n","import { join } from 'node:path';\nimport { rm, rename } from 'node:fs/promises';\nimport type {\n  NewPage,\n  RenamedPage,\n  PageId,\n} from '@wix/ambassador-velo-apps-v1-app/types';\nimport { pathExists, outputFile } from '@wix/cli-fs';\n\nexport async function createPages(\n  projectFolder: string,\n  pages: NewPage[]\n): Promise<void> {\n  await Promise.all(\n    pages.map((page) => {\n      if (!page.pageId?.path || !page.content) {\n        return Promise.resolve();\n      }\n\n      return outputFile(join(projectFolder, page.pageId.path), page.content);\n    })\n  );\n}\n\nexport async function renamePages(\n  projectFolder: string,\n  pages: RenamedPage[]\n): Promise<void> {\n  await Promise.all(\n    pages.map(async (page) => {\n      if (!page.sourcePath?.path || !page.targetPath?.path) {\n        return;\n      }\n\n      const sourcePath = join(projectFolder, page.sourcePath.path);\n      const targetPath = join(projectFolder, page.targetPath.path);\n\n      if (await pathExists(targetPath)) {\n        return rm(sourcePath, { force: true });\n      }\n\n      return rename(sourcePath, targetPath);\n    })\n  );\n}\n\nexport async function deletePages(\n  projectFolder: string,\n  pages: PageId[]\n): Promise<void> {\n  await Promise.all(\n    pages.map((page) => {\n      if (!page.path) {\n        return Promise.resolve();\n      }\n\n      return rm(join(projectFolder, page.path), { force: true });\n    })\n  );\n}\n"],"mappings":"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","names":["__toESM","bin","import_node_path","__toESM","install","import_node_path","tunnel","__toESM","AlreadyInstalledError","MACOS_SERVICE_PATH","NotInstalledError","identifier","install","service","import_tunnel","process","tunnel","_a","normalizePath","filePath","rm","join","join","GridAppLayout","rm","tunnel"]}